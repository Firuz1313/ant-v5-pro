import database from "../src/utils/database.js";
import { v4 as uuidv4 } from "uuid";
import dotenv from "dotenv";

// –ó–∞–≥—Ä—É–∑–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
dotenv.config();

async function createDefaultRemotes() {
  try {
    console.log("üéÆ –°–æ–∑–¥–∞–Ω–∏–µ –ø—É–ª—å—Ç–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤ ANT Support");
    console.log("========================================================");

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
    const connectionTest = await database.testConnection();
    if (!connectionTest.success) {
      console.error("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö");
      process.exit(1);
    }

    console.log("‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ");

    // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
    const devicesResult = await database.query(
      "SELECT id, name, brand, model FROM devices WHERE is_active = true",
    );

    const devices = devicesResult.rows;
    console.log(`üì∫ –ù–∞–π–¥–µ–Ω–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤: ${devices.length}`);

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—É–ª—å—Ç—ã
    const existingRemotesResult = await database.query(
      "SELECT device_id, COUNT(*) as count FROM remotes WHERE is_active = true GROUP BY device_id",
    );
    const existingRemotes = new Map(
      existingRemotesResult.rows.map((row) => [
        row.device_id,
        parseInt(row.count),
      ]),
    );

    console.log("üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—âÔøΩÔøΩ—Å—Ç–≤—É—é—â–∏—Ö –ø—É–ª—å—Ç–æ–≤...");

    const defaultRemotes = [
      {
        deviceId: "device-ant-basic",
        name: "ANT Basic Remote",
        manufacturer: "ANT",
        model: "RC-ANT-B100",
        description: "–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø—É–ª—å—Ç –¥–ª—è ANT Basic –ø—Ä–∏—Å—Ç–∞–≤–∫–∏",
        layout: "standard",
        colorScheme: "dark",
        dimensions: { width: 200, height: 480 },
        buttons: [
          {
            id: "power",
            name: "Power",
            type: "power",
            x: 100,
            y: 40,
            width: 40,
            height: 40,
            action: "power_toggle",
          },
          {
            id: "home",
            name: "Home",
            type: "navigation",
            x: 100,
            y: 100,
            width: 35,
            height: 35,
            action: "goto_home",
          },
          {
            id: "back",
            name: "Back",
            type: "navigation",
            x: 50,
            y: 100,
            width: 35,
            height: 35,
            action: "go_back",
          },
          {
            id: "menu",
            name: "Menu",
            type: "navigation",
            x: 150,
            y: 100,
            width: 35,
            height: 35,
            action: "open_menu",
          },
          {
            id: "up",
            name: "Up",
            type: "direction",
            x: 100,
            y: 160,
            width: 30,
            height: 30,
            action: "navigate_up",
          },
          {
            id: "down",
            name: "Down",
            type: "direction",
            x: 100,
            y: 220,
            width: 30,
            height: 30,
            action: "navigate_down",
          },
          {
            id: "left",
            name: "Left",
            type: "direction",
            x: 70,
            y: 190,
            width: 30,
            height: 30,
            action: "navigate_left",
          },
          {
            id: "right",
            name: "Right",
            type: "direction",
            x: 130,
            y: 190,
            width: 30,
            height: 30,
            action: "navigate_right",
          },
          {
            id: "ok",
            name: "OK",
            type: "action",
            x: 100,
            y: 190,
            width: 30,
            height: 30,
            action: "confirm",
          },
          {
            id: "vol_up",
            name: "Vol+",
            type: "volume",
            x: 40,
            y: 160,
            width: 25,
            height: 25,
            action: "volume_up",
          },
          {
            id: "vol_down",
            name: "Vol-",
            type: "volume",
            x: 40,
            y: 190,
            width: 25,
            height: 25,
            action: "volume_down",
          },
          {
            id: "ch_up",
            name: "Ch+",
            type: "channel",
            x: 160,
            y: 160,
            width: 25,
            height: 25,
            action: "channel_up",
          },
          {
            id: "ch_down",
            name: "Ch-",
            type: "channel",
            x: 160,
            y: 190,
            width: 25,
            height: 25,
            action: "channel_down",
          },
          {
            id: "num_1",
            name: "1",
            type: "number",
            x: 60,
            y: 280,
            width: 25,
            height: 25,
            action: "number_1",
          },
          {
            id: "num_2",
            name: "2",
            type: "number",
            x: 100,
            y: 280,
            width: 25,
            height: 25,
            action: "number_2",
          },
          {
            id: "num_3",
            name: "3",
            type: "number",
            x: 140,
            y: 280,
            width: 25,
            height: 25,
            action: "number_3",
          },
          {
            id: "num_4",
            name: "4",
            type: "number",
            x: 60,
            y: 310,
            width: 25,
            height: 25,
            action: "number_4",
          },
          {
            id: "num_5",
            name: "5",
            type: "number",
            x: 100,
            y: 310,
            width: 25,
            height: 25,
            action: "number_5",
          },
          {
            id: "num_6",
            name: "6",
            type: "number",
            x: 140,
            y: 310,
            width: 25,
            height: 25,
            action: "number_6",
          },
          {
            id: "num_7",
            name: "7",
            type: "number",
            x: 60,
            y: 340,
            width: 25,
            height: 25,
            action: "number_7",
          },
          {
            id: "num_8",
            name: "8",
            type: "number",
            x: 100,
            y: 340,
            width: 25,
            height: 25,
            action: "number_8",
          },
          {
            id: "num_9",
            name: "9",
            type: "number",
            x: 140,
            y: 340,
            width: 25,
            height: 25,
            action: "number_9",
          },
          {
            id: "num_0",
            name: "0",
            type: "number",
            x: 100,
            y: 370,
            width: 25,
            height: 25,
            action: "number_0",
          },
        ],
        zones: [
          {
            id: "power_zone",
            name: "Power Area",
            x: 80,
            y: 20,
            width: 80,
            height: 80,
            description: "Power button area",
          },
          {
            id: "nav_zone",
            name: "Navigation Area",
            x: 40,
            y: 140,
            width: 120,
            height: 100,
            description: "Navigation controls",
          },
          {
            id: "number_zone",
            name: "Number Pad",
            x: 40,
            y: 260,
            width: 120,
            height: 130,
            description: "Number buttons",
          },
        ],
      },
      {
        deviceId: "device-ant-premium",
        name: "ANT Premium Smart Remote",
        manufacturer: "ANT",
        model: "RC-ANT-P200",
        description:
          "–£–º–Ω—ã–π –ø—É–ª—å—Ç –¥–ª—è ANT Premium —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Smart TV —Ñ—É–Ω–∫—Ü–∏–π",
        layout: "smart",
        colorScheme: "dark",
        dimensions: { width: 210, height: 520 },
        buttons: [
          {
            id: "power",
            name: "Power",
            type: "power",
            x: 105,
            y: 40,
            width: 45,
            height: 45,
            action: "power_toggle",
          },
          {
            id: "home",
            name: "Home",
            type: "navigation",
            x: 105,
            y: 100,
            width: 40,
            height: 40,
            action: "goto_home",
          },
          {
            id: "back",
            name: "Back",
            type: "navigation",
            x: 50,
            y: 100,
            width: 40,
            height: 40,
            action: "go_back",
          },
          {
            id: "menu",
            name: "Menu",
            type: "navigation",
            x: 160,
            y: 100,
            width: 40,
            height: 40,
            action: "open_menu",
          },
          {
            id: "up",
            name: "Up",
            type: "direction",
            x: 105,
            y: 160,
            width: 35,
            height: 35,
            action: "navigate_up",
          },
          {
            id: "down",
            name: "Down",
            type: "direction",
            x: 105,
            y: 230,
            width: 35,
            height: 35,
            action: "navigate_down",
          },
          {
            id: "left",
            name: "Left",
            type: "direction",
            x: 70,
            y: 195,
            width: 35,
            height: 35,
            action: "navigate_left",
          },
          {
            id: "right",
            name: "Right",
            type: "direction",
            x: 140,
            y: 195,
            width: 35,
            height: 35,
            action: "navigate_right",
          },
          {
            id: "ok",
            name: "OK",
            type: "action",
            x: 105,
            y: 195,
            width: 35,
            height: 35,
            action: "confirm",
          },
          {
            id: "vol_up",
            name: "Vol+",
            type: "volume",
            x: 30,
            y: 160,
            width: 30,
            height: 30,
            action: "volume_up",
          },
          {
            id: "vol_down",
            name: "Vol-",
            type: "volume",
            x: 30,
            y: 195,
            width: 30,
            height: 30,
            action: "volume_down",
          },
          {
            id: "ch_up",
            name: "Ch+",
            type: "channel",
            x: 180,
            y: 160,
            width: 30,
            height: 30,
            action: "channel_up",
          },
          {
            id: "ch_down",
            name: "Ch-",
            type: "channel",
            x: 180,
            y: 195,
            width: 30,
            height: 30,
            action: "channel_down",
          },
          // Smart TV buttons
          {
            id: "netflix",
            name: "Netflix",
            type: "app",
            x: 50,
            y: 280,
            width: 30,
            height: 30,
            action: "launch_netflix",
          },
          {
            id: "youtube",
            name: "YouTube",
            type: "app",
            x: 90,
            y: 280,
            width: 30,
            height: 30,
            action: "launch_youtube",
          },
          {
            id: "prime",
            name: "Prime",
            type: "app",
            x: 130,
            y: 280,
            width: 30,
            height: 30,
            action: "launch_prime",
          },
          {
            id: "apps",
            name: "Apps",
            type: "app",
            x: 170,
            y: 280,
            width: 30,
            height: 30,
            action: "open_apps",
          },
          // Number pad
          {
            id: "num_1",
            name: "1",
            type: "number",
            x: 60,
            y: 330,
            width: 30,
            height: 30,
            action: "number_1",
          },
          {
            id: "num_2",
            name: "2",
            type: "number",
            x: 105,
            y: 330,
            width: 30,
            height: 30,
            action: "number_2",
          },
          {
            id: "num_3",
            name: "3",
            type: "number",
            x: 150,
            y: 330,
            width: 30,
            height: 30,
            action: "number_3",
          },
          {
            id: "num_4",
            name: "4",
            type: "number",
            x: 60,
            y: 365,
            width: 30,
            height: 30,
            action: "number_4",
          },
          {
            id: "num_5",
            name: "5",
            type: "number",
            x: 105,
            y: 365,
            width: 30,
            height: 30,
            action: "number_5",
          },
          {
            id: "num_6",
            name: "6",
            type: "number",
            x: 150,
            y: 365,
            width: 30,
            height: 30,
            action: "number_6",
          },
          {
            id: "num_7",
            name: "7",
            type: "number",
            x: 60,
            y: 400,
            width: 30,
            height: 30,
            action: "number_7",
          },
          {
            id: "num_8",
            name: "8",
            type: "number",
            x: 105,
            y: 400,
            width: 30,
            height: 30,
            action: "number_8",
          },
          {
            id: "num_9",
            name: "9",
            type: "number",
            x: 150,
            y: 400,
            width: 30,
            height: 30,
            action: "number_9",
          },
          {
            id: "num_0",
            name: "0",
            type: "number",
            x: 105,
            y: 435,
            width: 30,
            height: 30,
            action: "number_0",
          },
        ],
        zones: [
          {
            id: "power_zone",
            name: "Power Area",
            x: 80,
            y: 20,
            width: 90,
            height: 90,
            description: "Power button area",
          },
          {
            id: "nav_zone",
            name: "Navigation Area",
            x: 30,
            y: 140,
            width: 150,
            height: 110,
            description: "Navigation controls",
          },
          {
            id: "smart_zone",
            name: "Smart TV Apps",
            x: 40,
            y: 260,
            width: 140,
            height: 50,
            description: "Smart TV app shortcuts",
          },
          {
            id: "number_zone",
            name: "Number Pad",
            x: 40,
            y: 310,
            width: 130,
            height: 150,
            description: "Number buttons",
          },
        ],
      },
      {
        deviceId: "device-ant-pro",
        name: "ANT Professional Remote",
        manufacturer: "ANT",
        model: "RC-ANT-PR300",
        description:
          "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø—É–ª—å—Ç –¥–ª—è ANT Professional —Å —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏",
        layout: "custom",
        colorScheme: "dark",
        dimensions: { width: 220, height: 550 },
        buttons: [
          {
            id: "power",
            name: "Power",
            type: "power",
            x: 110,
            y: 40,
            width: 50,
            height: 50,
            action: "power_toggle",
          },
          {
            id: "home",
            name: "Home",
            type: "navigation",
            x: 110,
            y: 110,
            width: 40,
            height: 40,
            action: "goto_home",
          },
          {
            id: "back",
            name: "Back",
            type: "navigation",
            x: 50,
            y: 110,
            width: 40,
            height: 40,
            action: "go_back",
          },
          {
            id: "menu",
            name: "Menu",
            type: "navigation",
            x: 170,
            y: 110,
            width: 40,
            height: 40,
            action: "open_menu",
          },
          {
            id: "settings",
            name: "Settings",
            type: "navigation",
            x: 110,
            y: 160,
            width: 40,
            height: 40,
            action: "open_settings",
          },
          {
            id: "up",
            name: "Up",
            type: "direction",
            x: 110,
            y: 220,
            width: 35,
            height: 35,
            action: "navigate_up",
          },
          {
            id: "down",
            name: "Down",
            type: "direction",
            x: 110,
            y: 290,
            width: 35,
            height: 35,
            action: "navigate_down",
          },
          {
            id: "left",
            name: "Left",
            type: "direction",
            x: 75,
            y: 255,
            width: 35,
            height: 35,
            action: "navigate_left",
          },
          {
            id: "right",
            name: "Right",
            type: "direction",
            x: 145,
            y: 255,
            width: 35,
            height: 35,
            action: "navigate_right",
          },
          {
            id: "ok",
            name: "OK",
            type: "action",
            x: 110,
            y: 255,
            width: 35,
            height: 35,
            action: "confirm",
          },
          {
            id: "vol_up",
            name: "Vol+",
            type: "volume",
            x: 30,
            y: 220,
            width: 30,
            height: 30,
            action: "volume_up",
          },
          {
            id: "vol_down",
            name: "Vol-",
            type: "volume",
            x: 30,
            y: 255,
            width: 30,
            height: 30,
            action: "volume_down",
          },
          {
            id: "ch_up",
            name: "Ch+",
            type: "channel",
            x: 190,
            y: 220,
            width: 30,
            height: 30,
            action: "channel_up",
          },
          {
            id: "ch_down",
            name: "Ch-",
            type: "channel",
            x: 190,
            y: 255,
            width: 30,
            height: 30,
            action: "channel_down",
          },
          // Professional controls
          {
            id: "record",
            name: "Record",
            type: "media",
            x: 50,
            y: 340,
            width: 30,
            height: 30,
            action: "start_recording",
          },
          {
            id: "play",
            name: "Play",
            type: "media",
            x: 90,
            y: 340,
            width: 30,
            height: 30,
            action: "play_pause",
          },
          {
            id: "stop",
            name: "Stop",
            type: "media",
            x: 130,
            y: 340,
            width: 30,
            height: 30,
            action: "stop",
          },
          {
            id: "rewind",
            name: "Rewind",
            type: "media",
            x: 170,
            y: 340,
            width: 30,
            height: 30,
            action: "rewind",
          },
          // Number pad
          {
            id: "num_1",
            name: "1",
            type: "number",
            x: 65,
            y: 390,
            width: 30,
            height: 30,
            action: "number_1",
          },
          {
            id: "num_2",
            name: "2",
            type: "number",
            x: 110,
            y: 390,
            width: 30,
            height: 30,
            action: "number_2",
          },
          {
            id: "num_3",
            name: "3",
            type: "number",
            x: 155,
            y: 390,
            width: 30,
            height: 30,
            action: "number_3",
          },
          {
            id: "num_4",
            name: "4",
            type: "number",
            x: 65,
            y: 425,
            width: 30,
            height: 30,
            action: "number_4",
          },
          {
            id: "num_5",
            name: "5",
            type: "number",
            x: 110,
            y: 425,
            width: 30,
            height: 30,
            action: "number_5",
          },
          {
            id: "num_6",
            name: "6",
            type: "number",
            x: 155,
            y: 425,
            width: 30,
            height: 30,
            action: "number_6",
          },
          {
            id: "num_7",
            name: "7",
            type: "number",
            x: 65,
            y: 460,
            width: 30,
            height: 30,
            action: "number_7",
          },
          {
            id: "num_8",
            name: "8",
            type: "number",
            x: 110,
            y: 460,
            width: 30,
            height: 30,
            action: "number_8",
          },
          {
            id: "num_9",
            name: "9",
            type: "number",
            x: 155,
            y: 460,
            width: 30,
            height: 30,
            action: "number_9",
          },
          {
            id: "num_0",
            name: "0",
            type: "number",
            x: 110,
            y: 495,
            width: 30,
            height: 30,
            action: "number_0",
          },
        ],
        zones: [
          {
            id: "power_zone",
            name: "Power Area",
            x: 85,
            y: 20,
            width: 100,
            height: 100,
            description: "Power button area",
          },
          {
            id: "nav_zone",
            name: "Navigation Area",
            x: 30,
            y: 200,
            width: 160,
            height: 120,
            description: "Navigation controls",
          },
          {
            id: "media_zone",
            name: "Media Controls",
            x: 40,
            y: 320,
            width: 140,
            height: 50,
            description: "Media playback controls",
          },
          {
            id: "number_zone",
            name: "Number Pad",
            x: 45,
            y: 370,
            width: 130,
            height: 160,
            description: "Number buttons",
          },
        ],
      },
      {
        deviceId: "device-generic-dvb",
        name: "Generic DVB-T2 Remote",
        manufacturer: "Generic",
        model: "RC-DVB-STD",
        description: "–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø—É–ª—å—Ç –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö DVB-T2 –ø—Ä–∏—Å—Ç–∞–≤–æ–∫",
        layout: "standard",
        colorScheme: "dark",
        dimensions: { width: 190, height: 450 },
        buttons: [
          {
            id: "power",
            name: "Power",
            type: "power",
            x: 95,
            y: 35,
            width: 40,
            height: 40,
            action: "power_toggle",
          },
          {
            id: "source",
            name: "Source",
            type: "navigation",
            x: 50,
            y: 90,
            width: 35,
            height: 35,
            action: "change_source",
          },
          {
            id: "menu",
            name: "Menu",
            type: "navigation",
            x: 95,
            y: 90,
            width: 35,
            height: 35,
            action: "open_menu",
          },
          {
            id: "guide",
            name: "Guide",
            type: "navigation",
            x: 140,
            y: 90,
            width: 35,
            height: 35,
            action: "open_guide",
          },
          {
            id: "up",
            name: "Up",
            type: "direction",
            x: 95,
            y: 150,
            width: 30,
            height: 30,
            action: "navigate_up",
          },
          {
            id: "down",
            name: "Down",
            type: "direction",
            x: 95,
            y: 210,
            width: 30,
            height: 30,
            action: "navigate_down",
          },
          {
            id: "left",
            name: "Left",
            type: "direction",
            x: 65,
            y: 180,
            width: 30,
            height: 30,
            action: "navigate_left",
          },
          {
            id: "right",
            name: "Right",
            type: "direction",
            x: 125,
            y: 180,
            width: 30,
            height: 30,
            action: "navigate_right",
          },
          {
            id: "ok",
            name: "OK",
            type: "action",
            x: 95,
            y: 180,
            width: 30,
            height: 30,
            action: "confirm",
          },
          {
            id: "vol_up",
            name: "Vol+",
            type: "volume",
            x: 35,
            y: 150,
            width: 25,
            height: 25,
            action: "volume_up",
          },
          {
            id: "vol_down",
            name: "Vol-",
            type: "volume",
            x: 35,
            y: 180,
            width: 25,
            height: 25,
            action: "volume_down",
          },
          {
            id: "ch_up",
            name: "Ch+",
            type: "channel",
            x: 155,
            y: 150,
            width: 25,
            height: 25,
            action: "channel_up",
          },
          {
            id: "ch_down",
            name: "Ch-",
            type: "channel",
            x: 155,
            y: 180,
            width: 25,
            height: 25,
            action: "channel_down",
          },
          {
            id: "exit",
            name: "Exit",
            type: "navigation",
            x: 95,
            y: 240,
            width: 30,
            height: 30,
            action: "exit",
          },
          // Number pad
          {
            id: "num_1",
            name: "1",
            type: "number",
            x: 55,
            y: 290,
            width: 25,
            height: 25,
            action: "number_1",
          },
          {
            id: "num_2",
            name: "2",
            type: "number",
            x: 95,
            y: 290,
            width: 25,
            height: 25,
            action: "number_2",
          },
          {
            id: "num_3",
            name: "3",
            type: "number",
            x: 135,
            y: 290,
            width: 25,
            height: 25,
            action: "number_3",
          },
          {
            id: "num_4",
            name: "4",
            type: "number",
            x: 55,
            y: 320,
            width: 25,
            height: 25,
            action: "number_4",
          },
          {
            id: "num_5",
            name: "5",
            type: "number",
            x: 95,
            y: 320,
            width: 25,
            height: 25,
            action: "number_5",
          },
          {
            id: "num_6",
            name: "6",
            type: "number",
            x: 135,
            y: 320,
            width: 25,
            height: 25,
            action: "number_6",
          },
          {
            id: "num_7",
            name: "7",
            type: "number",
            x: 55,
            y: 350,
            width: 25,
            height: 25,
            action: "number_7",
          },
          {
            id: "num_8",
            name: "8",
            type: "number",
            x: 95,
            y: 350,
            width: 25,
            height: 25,
            action: "number_8",
          },
          {
            id: "num_9",
            name: "9",
            type: "number",
            x: 135,
            y: 350,
            width: 25,
            height: 25,
            action: "number_9",
          },
          {
            id: "num_0",
            name: "0",
            type: "number",
            x: 95,
            y: 380,
            width: 25,
            height: 25,
            action: "number_0",
          },
        ],
        zones: [
          {
            id: "power_zone",
            name: "Power Area",
            x: 75,
            y: 15,
            width: 80,
            height: 80,
            description: "Power button area",
          },
          {
            id: "nav_zone",
            name: "Navigation Area",
            x: 35,
            y: 130,
            width: 120,
            height: 90,
            description: "Navigation controls",
          },
          {
            id: "number_zone",
            name: "Number Pad",
            x: 35,
            y: 270,
            width: 120,
            height: 140,
            description: "Number buttons",
          },
        ],
      },
    ];

    let createdCount = 0;
    let skippedCount = 0;

    for (const remoteConfig of defaultRemotes) {
      const { deviceId, ...remoteData } = remoteConfig;

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
      const deviceExists = devices.find((d) => d.id === deviceId);
      if (!deviceExists) {
        console.log(`‚ö†Ô∏è  –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ ${deviceId} –Ω–µ –Ω–∞–π–¥–µ–Ω–æ, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø—É–ª—å—Ç`);
        skippedCount++;
        continue;
      }

      // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ —É–∂–µ –ø—É–ª—å—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
      const existingCount = existingRemotes.get(deviceId) || 0;
      if (existingCount > 0) {
        console.log(
          `‚è≠Ô∏è  –£ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ ${deviceExists.name} —É–∂–µ –µ—Å—Ç—å ${existingCount} –ø—É–ª—å—Ç(–æ–≤), –ø—Ä–æ–ø—É—Å–∫–∞–µ–º`,
        );
        skippedCount++;
        continue;
      }

      console.log(`ÔøΩÔøΩÔøΩ –°–æ–∑–¥–∞–µ–º –ø—É–ª—å—Ç –¥–ª—è ${deviceExists.name}...`);

      const remoteId = uuidv4();
      await database.query(
        `INSERT INTO remotes (
          id, device_id, name, manufacturer, model, description, 
          layout, color_scheme, dimensions, buttons, zones, 
          is_default, usage_count, is_active, created_at, updated_at
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16)`,
        [
          remoteId,
          deviceId,
          remoteData.name,
          remoteData.manufacturer,
          remoteData.model,
          remoteData.description,
          remoteData.layout,
          remoteData.colorScheme,
          JSON.stringify(remoteData.dimensions),
          JSON.stringify(remoteData.buttons),
          JSON.stringify(remoteData.zones),
          true, // is_default - –ø–µ—Ä–≤—ã–π –ø—É–ª—å—Ç –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è default
          0, // usage_count
          true, // is_active
          new Date().toISOString(),
          new Date().toISOString(),
        ],
      );

      createdCount++;
      console.log(`‚úÖ –ü—É–ª—å—Ç "${remoteData.name}" —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ`);
    }

    // –°–æ–∑–¥–∞–µ–º —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø—É–ª—å—Ç
    console.log("üåç –°–æÔøΩÔøΩ–¥–∞–Ω–∏–µ —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –ø—É–ª—å—Ç–∞...");

    const universalRemoteExists = await database.query(
      "SELECT COUNT(*) as count FROM remotes WHERE device_id IS NULL AND is_active = true",
    );

    if (parseInt(universalRemoteExists.rows[0].count) === 0) {
      const universalRemoteId = uuidv4();
      await database.query(
        `INSERT INTO remotes (
          id, device_id, name, manufacturer, model, description, 
          layout, color_scheme, dimensions, buttons, zones, 
          is_default, usage_count, is_active, created_at, updated_at
        ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12, $13, $14, $15, $16)`,
        [
          universalRemoteId,
          null, // device_id = NULL –¥–ª—è —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–≥–æ –ø—É–ª—å—Ç–∞
          "Universal Remote",
          "ANT",
          "RC-UNIVERSAL",
          "–£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø—É–ª—å—Ç –¥–ª—è –≤—Å–µ—Ö –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤",
          "standard",
          "dark",
          JSON.stringify({ width: 200, height: 460 }),
          JSON.stringify([
            {
              id: "power",
              name: "Power",
              type: "power",
              x: 100,
              y: 40,
              width: 40,
              height: 40,
              action: "power_toggle",
            },
            {
              id: "menu",
              name: "Menu",
              type: "navigation",
              x: 100,
              y: 100,
              width: 35,
              height: 35,
              action: "open_menu",
            },
            {
              id: "up",
              name: "Up",
              type: "direction",
              x: 100,
              y: 160,
              width: 30,
              height: 30,
              action: "navigate_up",
            },
            {
              id: "down",
              name: "Down",
              type: "direction",
              x: 100,
              y: 220,
              width: 30,
              height: 30,
              action: "navigate_down",
            },
            {
              id: "left",
              name: "Left",
              type: "direction",
              x: 70,
              y: 190,
              width: 30,
              height: 30,
              action: "navigate_left",
            },
            {
              id: "right",
              name: "Right",
              type: "direction",
              x: 130,
              y: 190,
              width: 30,
              height: 30,
              action: "navigate_right",
            },
            {
              id: "ok",
              name: "OK",
              type: "action",
              x: 100,
              y: 190,
              width: 30,
              height: 30,
              action: "confirm",
            },
            {
              id: "vol_up",
              name: "Vol+",
              type: "volume",
              x: 40,
              y: 160,
              width: 25,
              height: 25,
              action: "volume_up",
            },
            {
              id: "vol_down",
              name: "Vol-",
              type: "volume",
              x: 40,
              y: 190,
              width: 25,
              height: 25,
              action: "volume_down",
            },
            {
              id: "ch_up",
              name: "Ch+",
              type: "channel",
              x: 160,
              y: 160,
              width: 25,
              height: 25,
              action: "channel_up",
            },
            {
              id: "ch_down",
              name: "Ch-",
              type: "channel",
              x: 160,
              y: 190,
              width: 25,
              height: 25,
              action: "channel_down",
            },
          ]),
          JSON.stringify([
            {
              id: "control_zone",
              name: "Main Controls",
              x: 30,
              y: 30,
              width: 140,
              height: 200,
              description: "Main control area",
            },
          ]),
          false, // is_default - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø—É–ª—å—Ç –Ω–µ —è–≤–ª—è–µ—Ç—Å—è default –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
          0, // usage_count
          true, // is_active
          new Date().toISOString(),
          new Date().toISOString(),
        ],
      );

      createdCount++;
      console.log("‚úÖ –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø—É–ª—å—Ç —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ");
    } else {
      console.log("‚è≠Ô∏è  –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –ø—É–ª—å—Ç —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º");
      skippedCount++;
    }

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∏—Ç–æ–≥–æ–≤–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—É–ª—å—Ç–æ–≤
    const finalCount = await database.query(
      "SELECT COUNT(*) as count FROM remotes WHERE is_active = true",
    );

    console.log("\nüéâ –°–æ–∑–¥–∞–Ω–∏–µ –ø—É–ª—å—Ç–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!");
    console.log("===============================");
    console.log(`‚úÖ –°–æ–∑–¥–∞–Ω–æ –ø—É–ª—å—Ç–æ–≤: ${createdCount}`);
    console.log(`‚è≠Ô∏è  –ü—Ä–æ–ø—É—â–µ–Ω–æ: ${skippedCount}`);
    console.log(`üì± –í—Å–µ–≥–æ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—É–ª—å—Ç–æ–≤: ${finalCount.rows[0].count}`);

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —É –∫–∞–∂–¥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –µÔøΩÔøΩ—Ç—å default –ø—É–ª—å—Ç
    console.log("\nüîç –ü—Ä–æ–≤–µ—Ä–∫–∞ default –ø—É–ª—å—Ç–æ–≤ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞:");
    for (const device of devices) {
      const defaultRemote = await database.query(
        "SELECT name FROM remotes WHERE device_id = $1 AND is_default = true AND is_active = true",
        [device.id],
      );

      if (defaultRemote.rows.length > 0) {
        console.log(`‚úÖ ${device.name}: ${defaultRemote.rows[0].name}`);
      } else {
        console.log(`‚ùå ${device.name}: default –ø—É–ª—å—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω`);
      }
    }

    console.log("\n‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É–ª—å—Ç–æ–≤ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!");
  } catch (error) {
    console.error("‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø—É–ª—å—Ç–æ–≤:", error.message);
    console.error("Stack trace:", error.stack);
    process.exit(1);
  } finally {
    await database.closePool();
    console.log("üîí –°–æ–µ–¥–∏–Ω–µ–Ω–∏—è —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö –∑–∞–∫—Ä—ã—Ç—ã");
  }
}

// –ó–∞–ø—É—Å–∫ —Å–æ–∑–¥–∞–Ω–∏—è –ø—É–ª—å—Ç–æ–≤
createDefaultRemotes();
